# 회고록(양희준)

한강 달빛 야시장에서 줄을 서 있는 사람들의 기사를 우연히 보게 되었다. 음식을 받기 위해 푸드트럭에 1시간을 넘게 서 있는 내용을 접하면서 음식을 예약할 수 있는 기능이 있는지 한강 달빛 야시장 어플을 설치하여 확인하였지만 예약하는 기능이 제공되지 않는 걸 확인하고 팀원들에게 이번 프로젝트의 주제로 예약 웹을 만드는 게 어떠냐고 의견을 제시하였다. 다행히 팀원들 모두 의견을 수렴해서 야시장 예약 웹을 제작하게 되었다. 음식을 예약할 수 있게 주문하기와 장바구니 기능, 음식점의 평점을 확인하기 위해서 리뷰와 답변의 기능을 최우선으로 잡고 기획을 시작했다. 기능 기획을 마무리하고 `react-query`, `recoil`, `styled-components`를 메인 기술로 선택하여 사용하기로 정하고 프로젝트를 진행하였다.

프로젝트를 진행하면서 첫 번째 문제는 기술 스택을 선정하는 작업이었다. 같이 프론트엔드를 담당하게 된 팀원분께서 상태관리 라이브러리와 CSS의 어려움을 이야기하셔서 세미 프로젝트 때에는 React만 사용하여 프로젝트를 진행하였다. 프로젝트 규모가 커지면서 상태관리 라이브러리나 CSS-in-JS가 필요하다고 느꼈기 때문에 팀원을 이해가 가게 설득하고 기술 스택을 정해야 했다. 상태관리 라이브러리를 사용해야 하는 이유에 대해서는 세미 프로젝트 때 어려움을 겪었던 `Props Drilling`으로 설득하고 컴포넌트의 Props를 사용하여 CSS 코드를 줄일 수 있고 가상 선택자를 한 스코프 내에서 사용할 수 있는 점을 설명하면서 styled-components를 사용해보자고 말씀드리고 또한 푸드트럭 리스트와 같이 변하지 않는 데이터가 많으므로 캐시에 데이터를 저장하며 서버 데이터와 클라이언트 데이터를 분리하기 위해 react-query를 사용해보자고 동의를 구해서 해당 기술을 사용하기로 했다.

상태관리 라이브러리를 선택하면서 Mobx는 클래스 컴포넌트 기반으로 사용되기 때문에 제외하고 Redux는 Flux 패턴으로 코드가 길어지는 문제점과 무엇보다 Recoil은 useState와 방식을 같게 사용하고 있어서 팀원분에게 익숙하게 사용할 수 있다는 점이 크게 작용했다. 또한 React-Query를 사용하면서 React.Suspense로 비동기처리를 생각하고 있었는데 러닝커브가 높다고 생각하면 Recoil만 사용하려고 했는데 Recoil도 React.Suspense를 지원하기 때문에 Recoil를 선택하게 되었다. 기술 선택을 하고 나서 팀원에게 프로젝트에서 사용하는 방법을 쉽게 습득하고 이해할 수 있도록 문서를 만들어서 제공하여 학습 시간을 줄여서 기술을 빠르게 도입할 수 있도록 해야겠다고 생각해서 문서를 만들어 제공하였는데 다행히 팀원분께서 해당 기술을 사용하여 프로젝트를 마무리 할 수 있었다.

두 번째 문제는 바로 로그인에 사용하는 쿠키가 문제였다. 프론트엔드 팀에서는 네트리파이를 이용해서 정적 배포를 백엔드 팀에서는 EC2를 사용해서 배포하였다.
헤더 속성인 withCredentials를 활성화하고 통신하였는데 cors 이슈가 계속해서 생겼다. 내용을 Google에서 검색해보니 Credentials 옵션을 활성화하면 엄격하게 관리하게 되므로 다른 origin이 접근할 수 없도록 하므로 서버에서도 설정 2개를 진행해야 했다. Access-Control-Allow-Origin에 명시적인 URL 작성과 서버에서도 Credentials를 true로 응답해야 했다. 설정을 완료하고 네트워크를 들어가서 쿠키를 확인해보니 쿠키가 발급이 되어있는데 웹 스토리지의 쿠키 안에 쿠키가 없는 문제가 발생했다. 문제를 해결하기 위해서 MDN에서 쿠키 문서를 읽던 중 스토리지는 Origin에 종속된 내용을 확인하고 쿠키를 발급하는 서버의 주소로 들어가 보니 쿠키를 확인할 수 있었다. 해당 주소로 통신하면 쿠키를 자동으로 전송하는데 정적 배포된 사이트에 쿠키가 확인되지 않아서 쿠키가 전송이 안 되는 줄 알았다. 문제를 해결하여 로그인을 문제를 해결할 수 있었다.

프로젝트를 진행하면서 React-Query의 useQuery의 키를 설정하던 중 서버에서 가져온 id를 함께 쿼리 키로 사용하였는데 쿼리를 갱신하면 갱신이 안 되는 문제가 발생하였는데 디버깅 도구를 사용해서 확인해보니 서버에서 불러온 값은 숫자 타입인데 쿼리 키에는 문자열 형식으로 들어가 있었다. 해당 데이터의 URL를 통해서 id를 불러오는 함수가 있었는데 URL은 문자열이기 때문에 발생한 문제였다. 이러한 문제점을 확인하면서 타입스크립트로 진행하는 게 오류를 줄여줄 수 있는지 확인할 수 있었다. 타입스크립트를 공부해서 다음 프로젝트에서는 꼭 사용해봐야겠다. 또한 기술을 선택하면서 왜 기술을 도입해야 하는지 설명하면서 해당 기술의 컨셉이 어떤지 확인할 수 있었고 쿠키를 통해서 네트워크 설정과 보안 설정을 확인하면서 CS 지식이 왜 탄탄한 개발자가 되는 길이지 알게 되었다.

무엇보다 팀장으로 진행하면서 느낀 점은 협업을 잘하는 개발자의 역량이 무엇일까 고민하였는데 다른 팀원이 개발에만 집중할 수 있게 하는 것이 아닐까? 라는 생각하게 되었다. 그래서 학습 문서와 참고문서도 제공하고 풀 리퀘스트 컨벤션과 템플릿, 이슈 템플릿, 칸반 보드를 제공하였다. 그 결과 프로젝트를 무사히 기간 내에 끝낼 수 있었던 것 같다. 앞으로 팀장, 팀원으로 프로젝트를 진행하게 되면 같이 협업하는 사람이 개발에만 집중할 수 있게 하는 방법이 무엇일까 생각하면서 협업을 진행하는 사람이 되고 싶다.
